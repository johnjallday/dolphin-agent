<!-- Sidebar -->
<div class="sidebar d-none d-lg-block" id="sidebar">
  <div class="sidebar-content">
  <!-- Agents Section -->
  <div class="sidebar-section">
    <div class="modern-card p-3">
      <div class="d-flex align-items-center justify-content-between mb-3">
        <h6 class="fw-semibold mb-0 d-flex align-items-center" style="color: var(--text-primary);">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="me-2">
            <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1L13.5 2.5L16.17 5.17L11.83 9.51C11.25 9.19 10.61 9 10 9C8.61 9 7.22 9.39 6 10.17L3 7.17L1.59 8.59L4.17 11.17C3.39 12.39 3 13.78 3 15.17C3 16.56 3.39 17.94 4.17 19.17L1.59 21.75L3 23.16L6 20.16C7.22 20.94 8.61 21.33 10 21.33C10.61 21.33 11.25 21.13 11.83 20.82L16.17 16.48L13.5 19.15L15 20.65L21 14.65V12.65L17.83 15.82L12.41 10.41C12.61 10.25 12.8 10.08 13 9.83L17.83 5L21 8.17V9Z"/>
          </svg>
          Agents
        </h6>
        <button id="addAgentBtn" class="modern-btn modern-btn-secondary p-1" style="min-width: auto;">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
          </svg>
        </button>
      </div>

      <div id="agentsList" class="agents-list accordion">
        <!-- Agents will be loaded dynamically -->
      </div>
    </div>
  </div>

  <!-- Plugins Section -->
  <div class="sidebar-section">
    <div class="modern-card p-3">
      <div class="d-flex align-items-center justify-content-between mb-3">
        <h6 class="fw-semibold mb-0 d-flex align-items-center" style="color: var(--text-primary);">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="me-2">
            <path d="M20.5,11H19V7C19,5.89 18.1,5 17,5H13V3.5A2.5,2.5 0 0,0 10.5,1A2.5,2.5 0 0,0 8,3.5V5H4C2.89,5 2,5.89 2,7V10.8H3.5C5,10.8 6.2,12 6.2,13.5C6.2,15 5,16.2 3.5,16.2H2V20C2,21.11 2.89,22 4,22H7.8V20.5C7.8,19 9,17.8 10.5,17.8C12,17.8 13.2,19 13.2,20.5V22H17C18.11,22 19,21.11 19,20V16H20.5A2.5,2.5 0 0,0 23,13.5A2.5,2.5 0 0,0 20.5,11Z"/>
          </svg>
          Plugins
        </h6>
        <button id="browsePluginsBtn" class="modern-btn modern-btn-secondary p-1" style="min-width: auto;">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor">
            <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
          </svg>
        </button>
      </div>
      
      <div id="pluginsList" class="plugins-list">
        <!-- Plugins will be loaded dynamically -->
      </div>
      
      <button id="pluginStoreBtn" class="modern-btn modern-btn-secondary w-100 mt-2">
        Plugin Store
      </button>
    </div>
  </div>

  <!-- System Section -->
  <div class="sidebar-section">
    <div class="modern-card p-3">
      <div class="d-flex align-items-center justify-content-between mb-3">
        <h6 class="fw-semibold mb-0 d-flex align-items-center" style="color: var(--text-primary);">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="me-2">
            <path d="M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z"/>
          </svg>
          System
        </h6>
      </div>
      
      <div id="systemInfo" class="system-info">
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span class="text-muted small">Version</span>
          <span class="text-primary small fw-medium">{{.Version}}</span>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span class="text-muted small">Status</span>
          <span class="badge badge-success">Online</span>
        </div>
        <div class="d-flex justify-content-between align-items-center mb-2">
          <span class="text-muted small">API Key</span>
          <span class="text-primary small fw-medium" id="apiKeyStatus">
            <span id="apiKeyMasked">sk-proj-***...***</span>
            <button id="editApiKeyBtn" class="btn btn-link p-0 ms-1" style="font-size: 12px; color: var(--accent-color);">
              <svg width="12" height="12" viewBox="0 0 24 24" fill="currentColor">
                <path d="M3,17.25V21H6.75L17.81,9.94L14.06,6.19L3,17.25M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.13,5.12L18.88,8.87M20.71,7.04Z"/>
              </svg>
            </button>
          </span>
        </div>
      </div>
      
      <button id="systemDiagnosticsBtn" class="modern-btn modern-btn-secondary w-100 mt-2">
        Diagnostics
      </button>
    </div>
  </div>
  
  <!-- Resize Handle -->
  <div class="sidebar-resize-handle" id="sidebarResizeHandle"></div>
</div>

<!-- API Key Modal -->
<div class="modal fade" id="apiKeyModal" tabindex="-1" aria-labelledby="apiKeyModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content" style="background: var(--bg-secondary); border: 1px solid var(--border-color);">
      <div class="modal-header" style="border-bottom: 1px solid var(--border-color);">
        <h5 class="modal-title" id="apiKeyModalLabel" style="color: var(--text-primary);">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" class="me-2">
            <path d="M7,14A2,2 0 0,1 5,12A2,2 0 0,1 7,10A2,2 0 0,1 9,12A2,2 0 0,1 7,14M12.65,10C11.83,7.67 9.61,6 7,6A6,6 0 0,0 1,12A6,6 0 0,0 7,18C9.61,18 11.83,16.33 12.65,14H17V18H21V14H23V10H12.65Z"/>
          </svg>
          Edit API Key
        </h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="filter: invert(1);"></button>
      </div>
      <div class="modal-body">
        <form id="apiKeyForm">
          <div class="mb-3">
            <label for="apiKeyInput" class="form-label" style="color: var(--text-primary);">OpenAI API Key</label>
            <div class="input-group">
              <input type="password" class="form-control" id="apiKeyInput" placeholder="sk-proj-..." 
                     style="background: var(--bg-tertiary); border: 1px solid var(--border-color); color: var(--text-primary);">
              <button type="button" class="btn btn-outline-secondary" id="toggleApiKeyVisibility" 
                      style="border-color: var(--border-color); color: var(--text-secondary);">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" id="eyeIcon">
                  <path d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z"/>
                </svg>
              </button>
            </div>
            <div class="form-text" style="color: var(--text-secondary);">
              Your API key is stored securely and never shared. It starts with "sk-proj-" or "sk-".
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer" style="border-top: 1px solid var(--border-color);">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" 
                style="background: var(--bg-tertiary); border-color: var(--border-color); color: var(--text-secondary);">
          Cancel
        </button>
        <button type="button" class="btn btn-primary" id="saveApiKeyBtn"
                style="background: var(--accent-color); border-color: var(--accent-color);">
          Save API Key
        </button>
      </div>
    </div>
  </div>
  </div>
</div>