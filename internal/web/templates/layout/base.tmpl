<!DOCTYPE html>
<html data-bs-theme="light">
{{template "head.tmpl" .}}

<body class="bg-light">
  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg glassmorphism position-fixed w-100 top-0" style="z-index: 1030; backdrop-filter: blur(10px);">
    <div class="container-fluid px-4">
      <a class="navbar-brand fw-bold d-flex align-items-center" href="#" style="color: var(--primary-color);">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" class="me-2">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </svg>
        {{.Title}}
      </a>
      
      <div class="d-flex align-items-center gap-2">
        <button id="darkModeToggle" class="modern-btn modern-btn-secondary">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"/>
          </svg>
          <span>Dark</span>
        </button>
      </div>
    </div>
  </nav>

  <div class="main-content-wrapper">
    {{template "sidebar.tmpl" .}}

    <!-- Main Content -->
    <div class="main-content">
      {{template "chat-area.tmpl" .}}
    </div>
  </div>

  <!-- Add Agent Modal -->
  <div class="modal fade" id="addAgentModal" tabindex="-1" aria-labelledby="addAgentModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content" style="background: var(--bg-primary); border: 1px solid var(--border-color);">
        <div class="modal-header" style="border-bottom: 1px solid var(--border-color);">
          <h5 class="modal-title" id="addAgentModalLabel" style="color: var(--text-primary);">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="me-2">
              <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1L13.5 2.5L16.17 5.17L11.83 9.51C11.25 9.19 10.61 9 10 9C8.61 9 7.22 9.39 6 10.17L3 7.17L1.59 8.59L4.17 11.17C3.39 12.39 3 13.78 3 15.17C3 16.56 3.39 17.94 4.17 19.17L1.59 21.75L3 23.16L6 20.16C7.22 20.94 8.61 21.33 10 21.33C10.61 21.33 11.25 21.13 11.83 20.82L16.17 16.48L13.5 19.15L15 20.65L21 14.65V12.65L17.83 15.82L12.41 10.41C12.61 10.25 12.8 10.08 13 9.83L17.83 5L21 8.17V9Z"/>
            </svg>
            Create New Agent
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="filter: invert(1);"></button>
        </div>
        <div class="modal-body">
          <form id="addAgentForm">
            <div class="mb-3">
              <label for="agentName" class="form-label" style="color: var(--text-primary);">Agent Name</label>
              <input type="text" id="agentName" class="modern-input w-100" placeholder="Enter agent name..." required>
            </div>
          </form>
        </div>
        <div class="modal-footer" style="border-top: 1px solid var(--border-color);">
          <button type="button" class="modern-btn modern-btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" id="createAgentBtn" class="modern-btn modern-btn-primary">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" class="me-1">
              <path d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z"/>
            </svg>
            Create Agent
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Plugin Store Modal -->
  <div class="modal fade" id="pluginStoreModal" tabindex="-1" aria-labelledby="pluginStoreModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
      <div class="modal-content" style="background: var(--bg-primary); border: 1px solid var(--border-color);">
        <div class="modal-header" style="border-bottom: 1px solid var(--border-color);">
          <h5 class="modal-title" id="pluginStoreModalLabel" style="color: var(--text-primary);">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor" class="me-2">
              <path d="M20.5,11H19V7C19,5.89 18.1,5 17,5H13V3.5A2.5,2.5 0 0,0 10.5,1A2.5,2.5 0 0,0 8,3.5V5H4C2.89,5 2,5.89 2,7V10.8H3.5C5,10.8 6.2,12 6.2,13.5C6.2,15 5,16.2 3.5,16.2H2V20C2,21.11 2.89,22 4,22H7.8V20.5C7.8,19 9,17.8 10.5,17.8C12,17.8 13.2,19 13.2,20.5V22H17C18.11,22 19,21.11 19,20V16H20.5A2.5,2.5 0 0,0 23,13.5A2.5,2.5 0 0,0 20.5,11Z"/>
            </svg>
            Plugin Store
          </h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" style="filter: invert(1);"></button>
        </div>
        <div class="modal-body">
          <div class="mb-3">
            <p style="color: var(--text-secondary);">Browse and install plugins from the online repository.</p>
          </div>
          <div id="onlinePluginsList" class="online-plugins-list">
            <!-- Online plugins will be loaded dynamically -->
          </div>
        </div>
        <div class="modal-footer" style="border-top: 1px solid var(--border-color);">
          <button type="button" class="modern-btn modern-btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="js/app.js?v=1694538177"></script>
</body>
</html>